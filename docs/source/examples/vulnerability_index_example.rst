Vulnerability Index Example
===========================

This example demonstrates how to generate and use time-based vulnerability indices.

.. code-block:: python

    from verus.data import TimeWindowGenerator
    import pandas as pd
    
    # Create time window generator
    tw_generator = TimeWindowGenerator(
        reference_date="2023-11-06",  # A Monday
        verbose=True
    )
    
    # Generate time windows based on typical opening hours
    time_windows = tw_generator.generate_from_schedule()
    
    # Print available categories
    print(f"Generated time windows for categories: {list(time_windows.keys())}")
    
    # Examine vulnerability indices for restaurants at different times
    if "restaurant" in time_windows:
        restaurant_hours = time_windows["restaurant"]
        print("\nRestaurant vulnerability indices throughout the day:")
        print(restaurant_hours[["hour", "vi"]].head(24))
        
    # Create a combined view of all POI types at a specific hour
    peak_hour = 18  # 6 PM
    peak_hour_vi = {}
    
    for category, tw_df in time_windows.items():
        hour_data = tw_df[tw_df["hour"] == peak_hour]
        if not hour_data.empty:
            peak_hour_vi[category] = hour_data["vi"].iloc[0]
    
    print(f"\nVulnerability indices at {peak_hour}:00:")
    for category, vi in peak_hour_vi.items():
        print(f"  {category}: {vi}")